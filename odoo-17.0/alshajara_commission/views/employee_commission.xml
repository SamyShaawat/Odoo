<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Employee Commission Kanban View -->
  <record id="view_employee_commission_kanban" model="ir.ui.view">
    <field name="name">employee.commission.kanban</field>
    <field name="model">employee.commission</field>
    <field name="arch" type="xml">
        <kanban create="false">
            <field name="employee_id"/>
            <field name="flat_amount"/>
            <field name="commission_percentage"/>
            <field name="sale_order_id"/>

            <templates>
                <t t-name="kanban-box">
                    <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_employee_commission_kanban">
                        <div class="o_kanban_image_fill_left d-none d-md-block o_kanban_image_full">
                            <img t-attf-src="#{kanban_image('hr.employee', 'image_128', record.employee_id.raw_value)}" role="img" t-att-alt="record.employee_id.value"/>
                        </div>
                        <div class="o_kanban_image d-md-none d-block o_kanban_image_full">
                            <img t-attf-src="#{kanban_image('hr.employee', 'image_128', record.employee_id.raw_value)}" role="img" t-att-alt="record.employee_id.value"/>
                        </div>
                        <div class="oe_kanban_details d-flex flex-column justify-content-between">
                            <div>
                                <strong class="o_kanban_record_title oe_employee_heading">
                                    <field name="employee_id"/>
                                </strong>
                                <ul>
                                    <li>
                                        <strong>Flat Amount:</strong> <field name="flat_amount"/>
                                    </li>
                                    <li>
                                        <strong>Commission:</strong> <field name="commission_percentage"/>%
                                    </li>
                                    <li>
                                        <strong>Sale Order:</strong> <field name="sale_order_id"/>
                                    </li>
                                </ul>
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left"/>
                                <div class="oe_kanban_bottom_right"/>
                            </div>
                        </div>
                    </div>
                </t>
            </templates>

            <!-- Optional CSS for the Kanban view -->
            <css>
                .o_employee_commission_kanban {
                    background-color: #f9f9f9;
                    border-radius: 10px;
                    padding: 10px;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                    margin-bottom: 15px;
                }
                .o_kanban_record_title {
                    font-size: 18px;
                    color: #333;
                }
                .oe_employee_heading {
                    margin-bottom: 8px;
                }
                ul {
                    padding-left: 0;
                    list-style-type: none;
                    font-size: 14px;
                    color: #555;
                }
                li {
                    margin-bottom: 5px;
                }
                .o_kanban_record_bottom {
                    margin-top: 10px;
                }
            </css>
        </kanban>
    </field>
</record>



        <!-- Employee Commission Tree View (for list display) -->
        <record id="view_employee_commission_tree" model="ir.ui.view">
            <field name="name">employee.commission.tree</field>
            <field name="model">employee.commission</field>
            <field name="arch" type="xml">

                <tree create="false">
                    <header>
                        <button name="action_create_journal_entry" type="object" string="Pay Commision" class="btn-primary"/>
                    </header>
                    <field name="employee_id"/>
                    <field name="commission_percentage"/>
                    <field name="flat_amount" string="Flat Amount"/>
                    <field name="sale_order_id" string="Sale Order"/>
                    <field name="partner_id"/>
                    <field name="date_order"/>
                     <field name="so_subtotal"/>
                     <field name="total_cost"/>
                     <field name="profit"/>
                     <field name="profit_percentage"/>
                     <field name="paid"/>
                    <!-- Add the following line to show the total of flat_amount -->
<!--                   <field name="flat_amount" string="Total Flat Amount" sum="True"/>-->
                </tree>

            </field>
        </record>



        <record id="view_employee_commission_search" model="ir.ui.view">
          <field name="name">employee.commission.search</field>
          <field name="model">employee.commission</field>
          <field name="arch" type="xml">
           <search>
               <field name="employee_id"/>
<!--               <field name="partner_id"/>-->
<!--               <field name="commission_percentage"/>-->
<!--            &lt;!&ndash; Filters &ndash;&gt;-->
<!--               <filter string="High Commission" name="high_commission" domain="[('commission_percentage', '>', 30)]"/>-->
<!--               <filter string="Low Commission" name="low_commission" domain="[('commission_percentage', '&lt;=', 30)]"/>-->
            <!-- Groups -->
               <group expand="0" string="Group By">
                   <filter string="Employee" name="employee" context="{'group_by':'employee_id'}"/>
               </group>
<!--               <group string="Customer" name="group_by_partner" context="{'group_by':'partner_id'}"/>-->
<!--               <group string="Sale Order" name="group_by_sale_order" context="{'group_by':'sale_order_id'}"/>-->
           </search>
           </field>
</record>

        <!-- Define the action for the Employee Commission Report -->
        <record id="action_employee_commission_report" model="ir.actions.act_window">
            <field name="name">Employee Commission Report</field>
            <field name="res_model">employee.commission</field>
            <field name="view_mode">tree,kanban</field>
            <field name="help" type="html">
                <p>View the commissions for each employee.</p>
            </field>
        </record>

        <!-- Define the menu item for the Employee Commission Report -->
        <menuitem id="accounting_employee_commission_report_menu"
                  name="Employee Commission Report"
                  parent="account.menu_finance_reports"
                  action="action_employee_commission_report"/>



    </data>
</odoo>
